#!/usr/bin/env bash
# ****************************************************************************
# CUI
#
# The Advanced Framework for Simulation, Integration, and Modeling (AFSIM)
#
# Copyright 2020 Infoscitex, a DCS Company. All rights reserved.
#
# The use, dissemination or disclosure of data in this file is subject to
# limitation or restriction. See accompanying README and LICENSE for details.
# ****************************************************************************

# Use this script if there are system libraries found in the default
# path that conflict with libraries that the executable depend on.

function get_script_dir() {
   local source="${BASH_SOURCE[0]}"
   local dir=""
   # While $source is a symlink, resolve it
   while [ -h "${source}" ]; do
      dir="$(cd -P "$(dirname "${source}")" && pwd)"
      source="$(readlink "${source}")"
      # If $source was a relative symlink, resolve it relative to the base directory
      if [[ ${source} != /* ]];
      then
         source="${dir}/${source}"
      fi
   done
   dir="$(cd -P "$(dirname "${source}")" && pwd)"
   echo "${dir}"
}

script_dir=$(get_script_dir)

export LD_LIBRARY_PATH="${script_dir}/lib:${LD_LIBRARY_PATH}"

exec "${script_dir}/@TARGET_NAME@" "$@"

